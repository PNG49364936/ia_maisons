<div style="background: #fff8b3; padding: 10px; margin-bottom: 10px;">
  <p><b>DEBUG</b> - @resultat prÃ©sent ? <%= @resultat.present? %></p>
  <p>@resultat : <%= @resultat.inspect %></p>
  <p>params : <%= params.inspect %></p>
</div>

<h1>ğŸ’¡ Estimation du prix d'une maison</h1>

<%= form_with url: training_data_path, method: :post do |f| %>

  <div>
    <%= form.label :taille, "Taille de la maison (mÂ²) :" %>
    <%= form.number_field :taille, step: 1, required: true %>
  </div>
  <div style="margin-top: 10px;">
    <%= form.submit "PrÃ©dire le prix" %>
  </div>
<% end %>

<% if @resultat.present? %>
  <% if @resultat.include?("âš ï¸") %>
    <div style="color: red; margin-top: 10px;"><%= @resultat %></div>
  <% else %>
    <h2 style="color: green; margin-top: 20px;"><%= @resultat %></h2>
  <% end %>
<% end %>

<hr>



<hr>



<hr>
<pre><%= @graph_data.inspect %></pre>

<hr>

<h3>ğŸ“‰ Graphique : DonnÃ©es dâ€™entraÃ®nement + PrÃ©diction</h3>

<pre>
DEBUG - @taille: <%= @taille.inspect %>
DEBUG - @prix_prevu: <%= @prix_prevu.inspect %>
</pre>

<% if @graph_data.present? %>
  <%= line_chart [
        { name: "DonnÃ©es rÃ©elles", data: @graph_data, color: "#4CAF50" },
        # ğŸ”´ Afficher le point de prÃ©diction sâ€™il existe
        (@taille && @prix_prevu) ? { 
          name: "PrÃ©diction", 
          data: { @taille => @prix_prevu },
          color: "#FF0000",
          points: true
        } : nil
      ].compact,
      xtitle: "Taille (mÂ²)",
      ytitle: "Prix (â‚¬)"
  %>
<% end %>

<% if @prix_prevu %>
  <p style="margin-top: 15px; font-size: 18px;">
    ğŸ’° <b>Prix prÃ©dit :</b>
    <%= number_with_delimiter(@prix_prevu.round(0).to_i, delimiter: " ") %> â‚¬
    pour une maison de <%= @taille.to_i %> mÂ²
  </p>
<% else %>
  <p style="color: #888;">(Aucune prÃ©diction encore calculÃ©e)</p>
<% end %>












